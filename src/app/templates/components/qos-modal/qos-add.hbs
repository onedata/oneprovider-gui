<div class="qos-add">
  <div class="list-content">
    <table class="table table-info table-info-large table-info-collapsible table-info-breakable">
      <tbody>
        <tr class="qos-info-row-replicas-number">
          <td class="property-name {{unless readonly "with-input"}}">
            {{tt this "replicasNumber"}}
          </td>
          <td class="property-value form-horizontal">
            <div class="form-group {{if replicasNumberValidationMessage "has-error"}}">
              <input
                type="number"
                class="form-control replicas-number-input"
                value={{replicasNumberString}}
                oninput={{action "replicasNumberChanged" value="target.value"}}
                onkeydown={{ignore-enter}}
                disabled={{disabled}}
                autofocus=true
              >
              {{#if replicasNumberValidationMessage}}
                <div class="form-message">
                  {{replicasNumberValidationMessage}}
                </div>
              {{/if}}
            </div>
          </td>
        </tr>
        <tr class="qos-info-row-expression">
          <td class="property-name {{unless readonly "with-input"}}">
            {{tt this "expression"}}
          </td>
          <td class="property-value form-horizontal">
            <div class="input-group-clipboard-textarea form-group {{if expressionValidationMessage "has-error"}}">
              <textarea
                oninput={{action "expressionInfixChanged" value="target.value"}}
                onblur={{action (mut expressionEditStarted) true}}
                disabled={{disabled}}
                rows="4"
                class="form-control no-resize code-textarea textarea-qos-expression"
                value={{expressionInfix}}
              ></textarea>
              <div class="btn-tooltip-container btn-suggestions-trigger-container">
                {{#one-spin-button
                  class="btn btn-sm btn-default btn-suggestions-trigger"
                  action=(action "toggleQosSuggestions" true)
                }}
                  {{tt this "insertCondition"}}
                {{/one-spin-button}}
              </div>
              {{#if expressionValidationMessage}}
                <div class="form-message">
                  {{expressionValidationMessage}}
                </div>
              {{/if}}
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

{{#render-later triggerRender=qosSuggestionsOpen}}
  {{#one-webui-popover
    popoverStyle="unlimited-width over-modals webui-popover-qos-suggestions"
    class="qos-suggestions-popover"
    mode="manual"
    padding=true
    triggerSelector=".btn-suggestions-trigger"
    placement=(if (or media.isMobile media.isTablet) "bottom" "top")
    open=(and qosSuggestionsOpen (not (is-empty qosParametersSuggestionsProxy.content)))
    as |popover|
  }}
    {{#click-outside
      action=(action "toggleQosSuggestions" false)
      except-selector=".webui-popover-qos-suggestions, .qos-suggestions-dropdown, .qos-suggestions-dropdown *"
    }}
      {{qos-parameters-suggestion-box
        qosParametersSuggestions=qosParametersSuggestions
        insertString=(action "insertString")
        refreshContainer=popover.reposition
      }}
    {{/click-outside}}
  {{/one-webui-popover}}
{{/render-later}}
