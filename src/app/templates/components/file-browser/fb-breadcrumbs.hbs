<div class="fb-breadcrumbs-inner {{if breadcrumbsRecomputing "breadcrumbs-recomputing"}}">
  {{#each filteredBreadcrumbsItemsProxy as |item i|}}
    <div class="fb-breadcrumbs-dir fb-breadcrumbs-element {{if (eq i 0) "fb-breadcrumbs-dir-root"}}">
      <a
        {{action "changeDir" item.file}}
        class="fb-breadcrumbs-dir-link fb-breadcrumbs-dir-name"
        data-dir-guid={{item.file.entityId}}
      >
        {{#if (eq i 0)}}
          <div class="inline-icon-container root-icon-container">
            {{one-icon icon=rootIcon}}
          </div>
          {{#if alwaysShowRootName}}
            {{item.name}}
          {{/if}}
        {{else}}
          {{item.name}}
        {{/if}}
        {{#if item.isRoot}}
          {{one-tooltip title=filteredBreadcrumbsItemsProxy.firstObject.file.name}}
        {{/if}}
      </a>
    </div>
    <div class="fb-breadcrumbs-separator fb-breadcrumbs-element"></div>
  {{/each}}
  {{!-- last element - current dir --}}
  {{#if menuButtons.length}}
    <a class="fb-breadcrumbs-dir fb-breadcrumbs-element fb-breadcrumbs-current-dir-button black truncate {{if dirActionsOpen "active"}} {{if areItemsEmpty "fb-breadcrumbs-dir-root"}}"
      onclick={{disable-bubbling (action "toggleDirActions")}}
      data-dir-guid={{currentItem.file.entityId}}
      style={{lastItemStyle}}
    >
      <span class="fb-breadcrumbs-dir-name">
        {{#if areItemsEmpty}}
          <div class="inline-icon-container root-icon-container">
            {{one-icon icon=rootIcon}}  
          </div>
        {{/if}}
        {{currentItem.name}}
        <div class="inline-icon-container breadcrumbs-current-dir-actions-trigger">
          {{one-icon icon="arrow-down"}}
        </div>
        {{#one-webui-popover
          popoverStyle="with-dropdown webui-popover-in-fb-head"
          padding=false
          popoverTrigger="manual"
          triggerSelector=(concat "#" elementId " .breadcrumbs-current-dir-actions-trigger")
          open=dirActionsOpen
          placement="bottom"
          as |popover|
        }}
          {{#click-outside action=(action "toggleDirActions" false)}}
            {{#popover-content-limit opened=popover.visible}}
              {{actions-popover-content
                actionsArray=menuButtons
                actionsArg=(array currentItem.file)
                actionClicked=(action "actionClicked")
                class="dir-actions ps--focus"
              }}
            {{/popover-content-limit}}
          {{/click-outside}}
        {{/one-webui-popover}}
      </span>
    </a>
  {{else}}
    <div class="fb-breadcrumbs-dir fb-breadcrumbs-element fb-breadcrumbs-current-dir-button {{if areItemsEmpty "fb-breadcrumbs-dir-root"}}">
      <a class="fb-breadcrumbs-dir-link fb-breadcrumbs-dir-name truncate {{if (eq currentItem.file.type "file") "fake-text"}}"
        data-dir-guid={{currentItem.file.entityId}}
        {{action "changeDir" currentItem.file}}
      >
        {{#if areItemsEmpty}}
          <div class="inline-icon-container root-icon-container">
            {{one-icon icon=rootIcon}}
          </div>
        {{/if}}
        {{currentItem.name}}
        {{#if currentItem.isRoot}}
          {{one-tooltip title=currentItem.name}}
        {{/if}}
      </a>
    </div>
  {{/if}}
</div>
