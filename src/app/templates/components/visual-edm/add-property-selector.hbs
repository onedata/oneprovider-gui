<OneWebuiPopover
  class="tags-selector add-property-selector"
  @open={{opened}}
  @triggerSelector={{triggerSelector}}
  @arrow={{true}}
  @registerApi={{action (mut popoverApi)}}
  @padding={{false}}
  @placement="auto"
  @popoverStyle="tags-selector"
  as |popover|
>
  <ClickOutside
    class="selector-container"
    @onClickOutside={{action "cancelSelect"}}
    @exceptSelector={{popoverClickOutsideIgnoreSelector}}
  >
    <input
      class="input-sm form-control filter-input"
      type="text"
      value={{filterValue}}
      oninput={{action (mut filterValue) value="target.value"}}
      placeholder={{tt this "searchPlaceholder"}}
    >
    <PerfectScrollbarElement class="tags-container">
      <ul class="selector-list">
        {{#each filteredAvailableItems key="label" as |propertyItem|}}
          <li
            class={{concat-classes
              "selector-item"
              (if propertyItem.disabled "disabled")
            }}
            onclick={{unless propertyItem.disabled (action "selectProperty" propertyItem)}}
          >
            <TruncatedString
              class="property-label"
              @isTooltipDisabled={{propertyItem.disabled}}
            >
              {{propertyItem.label}}
            </TruncatedString>
            {{#if propertyItem.disabled}}
              <OneTooltip @title={{tt this "singlePropertyAlreadyUsed"}}/>
            {{/if}}
          </li>
        {{/each}}
      </ul>
    </PerfectScrollbarElement>
  </ClickOutside>
</OneWebuiPopover>
