{{#promise-proxy-container proxy=aclSnapshotProxy}}
  {{#one-collapsible-list accordionMode=true as |list|}}
    {{#each aclSnapshot as |ace|}}
      {{#list.item as |listItem|}}
        {{acl-editor/ace-editor
          listItem=listItem
          ace=ace
          context="file"
          onChange=(action "aceChanged" ace)
          onMoveUp=(action "moveUp" ace)
          onMoveDown=(action "moveDown" ace)
          onRemove=(action "remove" ace)
          isFirstAce=(eq ace aclSnapshotProxy.firstObject)
          isLastAce=(eq ace aclSnapshotProxy.lastObject)}}
      {{/list.item}}
    {{else}}
      {{#list.item class="no-ace" as |listItem|}}
        {{#listItem.header isCollapsible=false}}{{tt this "noAce"}}{{/listItem.header}}
      {{/list.item}}  
    {{/each}}
    {{#list.item class="add-user-group-ace" as |listItem|}}
      {{#listItem.header isCollapsible=false truncate=false}}
        <span class="item-icon-container">
          {{one-icon icon="group-invite" class="item-icon"}}
        </span>
        {{#power-select
          dropdownClass="add-user-group-ace"
          options=sortedGroupAndUserList
          onchange=(action "addEntitySelected")
          renderInPlace=true
          placeholder=(tt this "addUserOrGroup")
          matcher=(action "nameMatcher")
          as |entity|}}
          <div class="option-container">
            {{#truncated-string}}
              {{one-icon icon=(if (eq entity.constructor.modelName "user") "user" "group")}}
              <span class="text">{{entity.name}}</span>
            {{/truncated-string}}
          </div>
        {{/power-select}}
      {{/listItem.header}}
    {{/list.item}}
  {{/one-collapsible-list}}
{{/promise-proxy-container}}
