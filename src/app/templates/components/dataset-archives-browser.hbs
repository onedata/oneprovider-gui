{{#promise-proxy-container proxy=initialRequiredDataProxy}}
  {{file-browser
    dir=currentBrowsableItem
    browserModel=browserModel
    parentModalDialogSelector=parentModalDialogSelector
    isSpaceOwned=space.currentUserIsOwner
    spaceId=space.entityId
    contentScroll=contentScroll
    selectedItems=selectedItems
    selectedItemsForJumpProxy=selectedItemsForJumpProxy
    spacePrivileges=spacePrivileges
    ignoreDeselectSelector=ignoreDeselectSelector
    onRegisterApi=onRegisterApi
    resolveFileParentFun=(action "resolveItemParent")
    customFetchDirChildren=(action "fetchChildren")
    changeSelectedItems=(action "changeSelectedItems")
    updateDirEntityId=(action "updateDirEntityId")
  }}
{{/promise-proxy-container}}

{{#if fileToShowInfo}}
  {{file-browser/fb-info-modal
    open=true
    file=fileToShowInfo
    initialTab=showInfoInitialTab
    showApiSection=false
    getDataUrl=(action "getFileUrl")
    onHide=(action closeInfoModal)
  }}
{{/if}}

{{#if fileToShowMetadata}}
  {{file-browser/fb-metadata-modal
    open=true
    file=fileToShowMetadata
    previewMode=true
    fileModelScope="private"
    onHide=(action closeMetadataModal)
  }}
{{/if}}

{{#if filesToEditPermissions}}
  {{edit-permissions-modal
    readonly=true
    files=filesToEditPermissions
    space=space
    onClose=(action closeEditPermissionsModal)
  }}
{{/if}}

{{#if filesToShowDistribution}}
  {{file-distribution-modal
    files=filesToShowDistribution
    space=space
    onClose=(action closeFileDistributionModal)
    getTransfersUrl=(action getTransfersUrl)
  }}
{{/if}}

{{#if fileToShare}}
  {{file-browser/fb-share-modal
    open=true
    file=fileToShare
    managePrivilege=spacePrivileges.manageShares
    onHide=(action closeShareModal)
    getShareUrl=(action getShareUrl)
  }}
{{/if}}

{{#if filesToShowQos}}
  {{qos-modal
    open=true
    files=filesToShowQos
    space=space
    showPrivilege=spacePrivileges.viewQos
    editPrivilege=spacePrivileges.manageQos
    getDataUrl=(action "getFileUrl")
    onHide=(action closeQosModal)
  }}
{{/if}}

{{file-browser/fb-download-modal
  file=fileForConfirmDownload
  confirmDownload=(action confirmFileDownload)
  onHide=(action closeConfirmFileDownload)
}}

{{#if archivesToPurge}}
  {{archives-purge-modal
    open=true
    archives=archivesToPurge
    onHide=(action closeArchivesPurgeModal)
  }}
{{/if}}

{{!-- FIXME: check content-space-datasets for duplicate --}}
{{#if createArchiveOpened}}
  {{archive-create-modal
    open=true
    dataset=browsableDataset
    options=createArchiveOptions
    onHide=(action closeCreateArchiveModal)
    onArchiveCreate=(action submitArchiveCreate)
  }}
{{/if}}