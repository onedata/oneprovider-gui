{{#one-modal
  class=(concat-classes
    "file-info-modal modal-content-overlay without-footer with-close-button"
    modalClass
  )
  open=open
  size="xl"
  backdropClose=true
  keyboard=true
  onHide=(action "close")
  as |modal|
}}
  {{#modal.header class="file-info-modal-header"}}
    <h1>{{tt this "header" type=typeTranslation}}</h1>
    {{modal-file-subheader files=(array file)}}
    {{#bs-tab
      class="bs-tab-onedata bs-tab-modern file-info-tabbar"
      activeId=activeTab
      customTabs=true
      as |tab|
    }}
      {{#bs-nav
        type="tabs"
        class="nav-tabs-file-info"
        as |nav|
      }}
        {{!-- FIXME: ticket with refactor old tabs --}}
        {{#nav.item
          active=(eq tab.activeId "general")
        }}
          <a class={{concat-classes
              "nav-link nav-link-general"
              (if (eq tab.activeId "general") "active")
            }}
            role="tab"
            {{action (mut activeTab) "general"}}
          >
            {{tt this "tabs.general.tabTitle"}}
          </a>
        {{/nav.item}}
        {{#if isHardlinksTabVisible}}
          {{#nav.item
            active=(eq tab.activeId "hardlinks")
          }}
            <a class={{concat-classes
                "nav-link nav-link-hardlinks"
                (if (eq tab.activeId "hardlinks") "active")
              }}
              role="tab"
              {{action (mut activeTab) "hardlinks"}}
            >
              {{tt this "tabs.hardlinks.tabTitle" hardlinksCount=(if
                hardlinksLimitExceeded
                (concat hardlinksLimit "+")
                hardlinksCount
              )}}
            </a>
          {{/nav.item}}
        {{/if}}
        {{#if isSizeTabVisible}}
          {{#nav.item
            active=(eq tab.activeId "size")
            disabled=isSizeTabDisabled
          }}
            <a class={{concat-classes
                "nav-link nav-link-metadata-type nav-link-size"
                (if (eq tab.activeId "size") "active")
              }}
              role="tab"
              {{action (mut activeTab) "size"}}
            >
              <div class="tab-label-size">
               {{tt this "tabs.size.tabTitle"}}
              </div>
            </a>
            {{#if isSizeTabDisabled}}
              {{one-tooltip
                title=(tt this (if
                  (eq itemType "symlink")
                  "tabs.size.disabledTip"
                  "tabs.size.turnOffTip"
                ))
              }}
            {{/if}}
          {{/nav.item}}
        {{/if}}
        {{#if isApiSamplesTabVisible}}
          {{#nav.item
            active=(eq tab.activeId "apiSamples")
          }}
            <a class={{concat-classes
                "nav-link nav-link-metadata-type nav-link-apiSamples"
                (if (eq tab.activeId "apiSamples") "active")
              }}
              role="tab"
              {{action (mut activeTab) "apiSamples"}}
            >
              {{one-icon class="tab-icon" icon="rest"}}
              <div class="tab-label-api-samples">
                {{tt this "tabs.apiSamples.tabTitle"}}

              </div>
            </a>
          {{/nav.item}}
        {{/if}}

        {{#each visibleTabsModels as |tabModel|}}
          {{#nav.item
            active=(eq tab.activeId tabModel.tabId)
            as |navItem|
          }}
            <a
              class={{concat-classes
                "nav-link"
                (concat "nav-link-" tabModel.tabId)
                (if (eq tab.activeId tabModel.tabId) "active")
              }}
              role="tab"
              {{action (mut activeTab) tabModel.tabId}}
            >
                {{!--
                  TODO: VFS-9626
                  make something like navComponent in addition
                  to simple title to implement custom tabs look (eg. indicators)
                --}}
                {{tabModel.title}}
            </a>
          {{/nav.item}}
        {{/each}}
      {{/bs-nav}}
    {{/bs-tab}}
  {{/modal.header}}
  {{#modal.body class="file-info-modal-body"}}
    {{#if (eq activeTab "general")}}
      <table class="table table-info table-info-large table-info-collapsible">
        <tbody>
          <tr class="file-info-row-name">
            <td class="property-name with-input{{if smallContent "-sm"}}">
              {{tt this "name" type=typeTranslation}}
            </td>
            <td class="property-value">
              {{clipboard-line
                value=fileName
                size=(if smallContent "sm")
              }}
            </td>
          </tr>
          <tr class="file-info-row-path">
            <td class="property-name with-input{{if smallContent "-sm"}}">{{tt this "path" type=typeTranslation}}</td>
            <td class="property-value">
              {{#promise-proxy-container
                proxy=filePathProxy
                sizeClass="xs"
                centered=false
                spinnerBlockClass="loading-file-path"
              }}
                {{clipboard-line
                  value=filePathProxy.content
                  size=(if smallContent "sm")
                }}
              {{/promise-proxy-container}}
            </td>
          </tr>
          {{#if (eq itemType "symlink")}}
            <tr class="file-info-row-target-path">
              <td class="property-name with-input{{if smallContent "-sm"}}">{{tt this "symlinkTargetPath"}}</td>
              <td class="property-value">
                {{clipboard-line
                  value=symlinkTargetPath
                  size=(if smallContent "sm")
                }}
              </td>
            </tr>
          {{/if}}
          {{#if space.entityId}}
            <tr class="file-info-row-space-id">
              <td class="property-name with-input{{if smallContent "-sm"}}">{{tt this "spaceId"}}</td>
              <td class="property-value">
                {{clipboard-line
                  value=space.entityId
                  class="monospace-font"
                  size=(if smallContent "sm")
                }}
              </td>
            </tr>
          {{/if}}
          {{#if fileGuiUrl}}
            <tr class="file-info-row-gui-url">
              <td class="property-name with-input{{if smallContent "-sm"}}">
                {{tt this "guiUrl" type=typeTranslation}}
              </td>
              <td class="property-value">
                {{clipboard-line
                  value=fileGuiUrl
                  size=(if smallContent "sm")
                }}
              </td>
            </tr>
          {{/if}}
          <tr id={{cdmiRowId}} class="file-info-row-cdmi-object-id">
            <td class="property-name with-input">
              {{tt this "cdmiObjectId"}}
            </td>
            <td class="property-value">
              <div class="input-group-clipboard-textarea">
                {{clipboard-line
                  value=cdmiObjectId
                  type="textarea"
                  textareaRows="3"
                  size=(if smallContent "sm")
                  class="monospace-font compact"
                }}
              </div>
            </td>
          </tr>
          {{#if (eq itemType "file")}}
            <tr class="file-info-row-size">
              <td class="property-name">{{tt this "size"}}</td>
              <td class="property-value">
                {{#truncated-string}}
                  <span class="file-info-size">{{bytes-to-string fileSize}}</span>
                  <span class="file-info-detail-size">({{fileSize}} B)</span>
                {{/truncated-string}}
              </td>
            </tr>
          {{/if}}
          <tr class="file-info-row-modification-time">
            <td class="property-name">{{tt this "modificationTime"}}</td>
            <td class="property-value">
              {{#truncated-string}}
                {{date-format modificationTime format="dateWithMinutes" blank="—"}}
              {{/truncated-string}}
            </td>
          </tr>
          <tr class="file-info-row-owner">
            <td class="property-name">{{tt this "owner"}}</td>
            <td class="property-value">
              {{#promise-proxy-container
                proxy=ownerFullNameProxy
                sizeClass="xs"
                centered=false
                spinnerBlockClass="loading-owner-full-name"
              }}
                {{#truncated-string}}
                  {{or ownerFullNameProxy.content "—"}}
                {{/truncated-string}}
              {{/promise-proxy-container}}
            </td>
          </tr>
        </tbody>
      </table>
    {{else if (eq activeTab "hardlinks")}}
      {{#promise-proxy-container tagName="div" class="loadable-row" proxy=fileHardlinksProxy}}
        {{#if (and hardlinksLimitExceeded fileHardlinks.hardlinks.length)}}
          <p class="shows-first-n-hardlinks text-center">
            <em>{{tt this "tabs.hardlinks.showingOnlyNFirst" limit=hardlinksLimit}}</em>
          </p>
        {{/if}}
        <ul class="file-hardlinks-list">
          {{#each fileHardlinks.hardlinks as |fileHardlink|}}
            {{file-info-modal/hardlink-entry
              class="file-hardlink"
              file=fileHardlink.file
              fileUrl=fileHardlink.fileUrl
              path=fileHardlink.path
              closeModal=modal.close
            }}
          {{else}}
            <li class="file-hardlink extra-hardlink-description">
              <em>{{tt this "tabs.hardlinks.noAccessToAll"
                fileType=(tt this (concat "fileType." itemType))
              }}</em>
              {{#if hardlinksFetchError}}
                {{one-label-tip title=hardlinksFetchError}}
              {{/if}}
            </li>
          {{/each}}
          {{#if (and
            (gt fileHardlinks.hardlinks.length 0)
            (lt fileHardlinks.hardlinks.length fileHardlinks.hardlinksCount)
          )}}
            <li class="file-hardlink extra-hardlink-description">
              <em>{{tt this "tabs.hardlinks.andNMoreYouHaveNoAccess"
                count=(sub fileHardlinks.hardlinksCount fileHardlinks.hardlinks.length)
              }}</em>
              {{#if hardlinksFetchError}}
                {{one-label-tip title=hardlinksFetchError}}
              {{/if}}
            </li>
          {{/if}}
        </ul>
      {{/promise-proxy-container}}
    {{else if (eq activeTab "size")}}
      {{file-browser/file-entry-charts
        space=space
        file=file
        dirStatsServiceState=dirStatsServiceState
      }}
    {{else if (eq activeTab "apiSamples")}}
      {{#promise-proxy-container
        proxy=apiSamplesProxy
        sizeClass="sm"
        centered=false
        spinnerBlockClass="loading-api-command absolute-middle-centered"
      }}
        {{api-samples
          apiSamples=apiSamples
        }}
      {{/promise-proxy-container}}
    {{else}}
      {{component activeTabModel.bodyComponent viewModel=activeTabModel.viewModel}}
    {{/if}}
  {{/modal.body}}
{{/one-modal}}
