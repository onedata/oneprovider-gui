<div class={{concat-classes "col-edm-editor full-height" colClassname}}>
  <div class="metadata-header-section-content">
    <h1 class="section-name main-header">
      {{tt this "header"}}
      {{#if readonly}}
        <OneLabelTip @title={{tt this "readonlyHeaderTip"}} />
      {{/if}}
    </h1>
    <ShareShow::OpenDataModeSwitch
      @mode={{mode}}
      @isVisualModeDisabled={{isVisualModeDisabled}}
      @visualModeTip={{if
        isVisualModeDisabled
        (tt this "submitDisabledReason.xmlNotAccepted")
      }}
      @onModeChange={{action "changeMode"}}
    />
  </div>

  {{!-- FIXME: podobnie jak w open-data-editor daÄ‡ mniej tekstu w trybie mobilnym --}}

  {{#unless readonly}}
    <p class="metadata-text">
      {{tt this "metadataEditorIntro"}}
    </p>
    <p class="metadata-text">
      {{tt this "introExtra"}}
      <OneLabelTip @title={{tt this "introTip"}} />
    </p>
  {{/unless}}

  {{#if (eq mode "visual")}}
    {{#if isXmlValueInvalid}}
      <div class="xml-value-invalid-info alert alert-warning">
        {{tt this "invalidXml"}}
      </div>
    {{else}}
      <VisualEdm @viewModel={{visualEdmViewModel}} />
    {{/if}}
  {{else if (eq mode "xml")}}
    <EmberAce
      class="ember-ace ember-ace-edm-source"
      @editorClass="full-height"
      @value={{currentXmlValue}}
      @worker="ace/mode/xml_worker"
      @mode="ace/mode/xml"
      @theme="ace/theme/textmate"
      @tabSize=2
      @useWrapMode={{true}}
      @highlightActiveLine={{true}}
      @showLineNumbers={{true}}
      @showPrintMargin={{false}}
      @readOnly={{readonly}}
      @ready={{action "aceEditorReady"}}
      @update={{action "sourceChanged"}}
    />
    {{#if isApplyXmlButtonShown}}
      <div class="btn-tooltip-container">
        <OneButton
          class="apply-xml-btn"
          @disabled={{isXmlNotParseable}}
          @onClick={{action "acceptXml"}}
        >
          {{tt this "applyAndFormatXml"}}
        </OneButton>
        {{#if isXmlNotParseable}}
          <OneTooltip @title={{tt this "submitDisabledReason.xmlNotValid"}} />
        {{/if}}
      </div>
    {{/if}}
    {{#if (or validator.isError isXmlNotParseable)}}
      <VisualEdm::ValidationError
        class="edm-metadata-invalid"
        @text={{tt this "notValid"}}
      />
    {{/if}}
  {{/if}}

  {{#unless readonly}}
    <ShareShow::MetadataEditorFooter
      @isSubmitDisabled={{isSubmitDisabled}}
      @submitButtonTip={{submitDisabledReason}}
      @handleService={{handleService}}
      @onCancel={{action "back"}}
      @onSubmit={{action "submit"}}
    />
  {{/unless}}
</div>

{{#if readonly}}
  <div class="hidden-xs hidden-sm col-md-4 col-lg-5 col-open-data-logo">
    <div class="open-data-logo">
    </div>
  </div>
{{/if}}